machine:
  node:
    version: 0.12.7

dependencies:
  pre:
    - npm install -g karma-cli
    - npm install -g grunt-cli
    - sudo pip install awscli
    - bundle install
  override:
    - npm install --no-spin
    - npm install --prefix infl-patternlab --no-spin
    - npm run styleguide-build
test:
  override:
    - karma start --single-run

deployment:
  aws:
    branch: master
    commands:
      - grunt --gruntfile infl-patternlab/Gruntfile.js
      - /bin/bash publish.sh
